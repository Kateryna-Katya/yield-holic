{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    lucide.createIcons();\n    gsap.registerPlugin(ScrollTrigger);\n\n    // --- 1. МОБИЛЬНОЕ МЕНЮ ---\n    const burger = document.querySelector('#burger-menu');\n    const mobileMenu = document.querySelector('#mobile-menu');\n    const header = document.querySelector('#header');\n    const menuLinks = document.querySelectorAll('.mobile-menu__link');\n\n    const toggleMenu = () => {\n        const isOpen = mobileMenu.classList.toggle('active');\n        header.classList.toggle('menu-open');\n        document.body.style.overflow = isOpen ? 'hidden' : '';\n    };\n\n    if (burger) burger.addEventListener('click', toggleMenu);\n    menuLinks.forEach(link => link.addEventListener('click', toggleMenu));\n\n    // --- 2. HERO АНИМАЦИЯ (С ФИКСОМ РАЗРЫВА СЛОВ) ---\n    const heroTitle = document.querySelector('.hero__title');\n    if (heroTitle) {\n        // Указываем и words, и chars для правильной структуры CSS\n        const split = new SplitType(heroTitle, { types: 'words, chars' });\n        \n        const tl = gsap.timeline({ defaults: { ease: 'power4.out' } });\n        \n        tl.to('.hero__badge', { opacity: 1, y: 0, duration: 0.8 })\n          .from(split.chars, { \n                opacity: 0, \n                y: 50, \n                stagger: 0.02, \n                duration: 0.8 \n          }, '-=0.4')\n          .to('.hero__text, .hero__btns', { \n                opacity: 1, \n                y: 0, \n                duration: 0.8, \n                stagger: 0.2 \n          }, '-=0.6');\n    }\n\n    // --- 3. ЛОГИКА REVEAL ДЛЯ ВСЕХ ЭЛЕМЕНТОВ ---\n    const setupReveal = () => {\n        const elements = document.querySelectorAll('.reveal-each');\n        elements.forEach((el) => {\n            gsap.fromTo(el, \n                { opacity: 0, y: 40 }, \n                {\n                    opacity: 1, y: 0, duration: 1,\n                    scrollTrigger: {\n                        trigger: el,\n                        start: 'top 88%',\n                    }\n                }\n            );\n        });\n    };\n    setupReveal();\n\n    // --- 4. ВАЛИДАЦИЯ ТЕЛЕФОНА ---\n    const phoneInput = document.querySelector('#phone-input');\n    phoneInput?.addEventListener('input', (e) => {\n        e.target.value = e.target.value.replace(/[^\\d+]/g, '');\n    });\n\n    // --- 5. КАПЧА И ОТПРАВКА ФОРМЫ ---\n    const form = document.querySelector('#main-form');\n    if (form) {\n        const n1 = Math.floor(Math.random() * 10);\n        const n2 = Math.floor(Math.random() * 5);\n        const sum = n1 + n2;\n        const captchaLabel = document.querySelector('#captcha-label');\n        if (captchaLabel) captchaLabel.innerText = `Решите пример: ${n1} + ${n2} = ?`;\n\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const captchaVal = document.querySelector('#captcha-input').value;\n            const success = document.querySelector('#form-success');\n            const error = document.querySelector('#form-error');\n\n            if (parseInt(captchaVal) === sum) {\n                success.style.display = 'block';\n                error.style.display = 'none';\n                form.reset();\n                form.style.opacity = '0.5';\n                form.style.pointerEvents = 'none';\n            } else {\n                error.style.display = 'block';\n                success.style.display = 'none';\n                gsap.to('#captcha-input', { x: 10, repeat: 3, yoyo: true, duration: 0.1 });\n            }\n        });\n    }\n\n    // --- 6. COOKIE POPUP ---\n    const cookiePopup = document.querySelector('#cookie-popup');\n    if (cookiePopup && !localStorage.getItem('yield_cookies_accepted')) {\n        setTimeout(() => cookiePopup.classList.add('show'), 2000);\n    }\n    document.querySelector('#accept-cookies')?.addEventListener('click', () => {\n        localStorage.setItem('yield_cookies_accepted', 'true');\n        cookiePopup.classList.remove('show');\n    });\n\n    // --- 7. СЧЕТЧИКИ (С КОРРЕКТНЫМ ПЕРЕБОРОМ) ---\n    document.querySelectorAll('.stat-item__num').forEach(counter => {\n        const target = +counter.getAttribute('data-count');\n        ScrollTrigger.create({\n            trigger: counter,\n            start: 'top 92%',\n            onEnter: () => {\n                let count = 0;\n                const update = () => {\n                    if (count < target) {\n                        count += target / 60;\n                        counter.innerText = Math.ceil(count);\n                        requestAnimationFrame(update);\n                    } else counter.innerText = target;\n                };\n                update();\n            },\n            once: true\n        });\n    });\n\n    // --- 8. ХЕДЕР ПРИ СКРОЛЛЕ ---\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) {\n            header.style.padding = '10px 0';\n            header.style.background = 'rgba(255, 255, 255, 0.98)';\n            header.style.boxShadow = '0 10px 30px rgba(0,0,0,0.05)';\n        } else {\n            header.style.padding = '0';\n            header.style.background = 'var(--glass)';\n            header.style.boxShadow = 'none';\n        }\n    });\n});"],"names":["burger","mobileMenu","header","menuLinks","toggleMenu","isOpen","link","heroTitle","split","el","phoneInput","e","form","n1","n2","sum","captchaLabel","captchaVal","success","error","cookiePopup","_a","counter","target","count","update"],"mappings":"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"}